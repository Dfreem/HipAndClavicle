@model Product
@{
    IFormFile imageFile = Model.TempFile!;
}

@*Modal product edit window*@
<form method="post" asp-action="EditProduct" asp-controller="Product" enctype="multipart/form-data">
    <div>
        <input type="hidden" asp-for="ProductId" value="@Model.ProductId" />
        <div class="card mx-auto card-top">
            <div class="my-auto">
                @if (Model.ProductImage is not null)
                {
                    <img class="card-img-top img-fluid" width="@Model.ProductImage!.Width" src="data:image;base64,@Convert.ToBase64String(Model.ProductImage.ImageData)" alt="Product Image" id="img-edit">
                }
                else
                {
                    <img src="https://placeholder.com/100" class="card-img-top" id="img-edit" />
                }

            </div>

            <div class="card-body">
                <div class="card-header">
                    <div class="input-group-sm">
                        <input asp-for="Name" class="form-control" type="text" />
                    </div>
                </div>
                <textarea asp-for="Description" ></textarea>
            </div>
        </div>
        <br />
        <div class="input-group-sm">
            <span class="form-text">Edit Image</span>
            <input asp-for="TempFile" type="file" id="file-edit" />

        </div>
        <div class="input-group">
            <span class="input-group-text"></span>
        </div>
        <input type="submit" class="btn btn-outline-success rounded-4 m-3" value="save" />
    </div>
</form>
<script>
    let cardImage = document.getElementById('img-edit');
    let cardInput = document.getElementById('file-edit');
    cardInput.onchange = () => {
        cardImage.src = URL.createObjectURL(cardInput.files[0]);
    }
</script>